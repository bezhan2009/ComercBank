(self.webpackChunkeskhata_business=self.webpackChunkeskhata_business||[]).push([["main"],{8019:(M,E,t)=>{"use strict";t.d(E,{h:()=>a});var a=function(e){return e.HOME="main",e.AUTH="auth",e.ACCOUNT="accounts",e.CONTRACTOR="contractors",e.PAYMENT="payments",e.NEW_PAYMENT=":serviceId",e.EDIT_PAYMENT=":serviceId/:paymentId",e.STATEMENT="statements",e.CURRENCY_CONTROL_V2="currency-control_v2",e.CreateCCApplication="create-currency-contract-document",e.CURRENCY_CONTROL="currency-control_v2",e.CURRENCY_EXCHANGE="currency-exchange",e.LOANS="loans",e.CURRENCY_EXCHANGE_CREATE="create-currency-exchange-application/currency_exchange/:serviceId",e.CURRENCY_EXCHANGE_APPLICATION_CREATE="create-currency-exchange-application/currency_exchange_application/:serviceId",e.SALARY_PROJECT="salary-project",e.CREATE_SALARY_APPLICATIONS="create-salary-application",e.TEMPLATE="templates",e.MAIN_TEMPLATE="main-templates",e.SETTING="settings",e.certificates="certificates",e.notifications="notifications",e.notFound="not-found",e.currencyExchangeHistory="currency-exchange-history",e.COMPANY_EMPLOYEES="company-employees",e.PAYROLLS="payrolls",e.MAIN_PAYROLLS="main-payrolls",e.OLD_PAYROLLS="old-payrolls",e.products="products",e.invoices="invoices",e.DEPOSITS="deposits",e.APPLICATIONS="applications",e.CARD_DETAIL="applications/detail/:applicationId",e.DISMISS_DETAIL="applications/dismiss-detail/:applicationId",e.SalaryContractTerm="salary-contract-term",e.home="home",e.offlineRegistration="offline-registration",e.onlineRegistration="online-registration",e.companyPerson="company-person",e}(a||{})},7098:(M,E,t)=>{"use strict";t.d(E,{e:()=>f});var a=t(1180),e=t(8645),l=t(4825),n=t(1687),d=t(9773),h=t(8180),D=t(5879);let f=(()=>{var s;class y{constructor(){(0,a.Z)(this,"completable",[]),(0,a.Z)(this,"destroyed$",new e.x)}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.completable.map(c=>c.complete()),this.completable.splice(0)}register(c){return this.completable.push(c),c}setTimeout(c,p){return(0,l.H)(p).pipe((0,d.R)(this.destroyed$)).subscribe(c)}clearTimeout(c){c&&("number"==typeof c?clearTimeout(c):"unsubscribe"in c&&c.unsubscribe())}setInterval(c,p,C=0){let m=(0,n.F)(p);return C>0&&(m=m.pipe((0,h.q)(C))),m.pipe((0,d.R)(this.destroyed$)).subscribe(c)}clearInterval(c){c&&("number"==typeof c?clearInterval(c):"unsubscribe"in c&&c.unsubscribe())}}return s=y,(0,a.Z)(y,"\u0275fac",function(c){return new(c||s)}),(0,a.Z)(y,"\u0275dir",D.lG2({type:s})),y})()},531:(M,E,t)=>{"use strict";t.d(E,{B:()=>a});var a=function(e){return e.paymentId="e50debd5-3f24-4093-b756-20bb93e8921f",e.statementId="91b9b73f-2756-4ec8-83f1-a483ebc981cc",e.currencyContractId="5002eb53-dd6c-4f4a-b4f9-fab2cade67d3",e.invoiceId="dbd873ab-ac6d-4fde-bd41-852060fe35d7",e.deposits="409d606e-f9e2-4d97-8978-c8569683a96a",e.currencyContractDocumentId="945c6d42-d49e-48a2-87ed-74106eca3ecd",e.currencyExchangeOperationId="7f376b63-e577-415c-ada8-51a80e298e09",e.salaryProjectApplicationId="33535b42-a988-4e7d-bdd8-aaef632a7f91",e.currencyExchangeApplicationId="22426d84-ee08-44d4-a7a6-19d9b21f0ade",e.payrollId="9eb0e841-5218-44f0-98eb-e9e02f37e05e",e.companyEmployeeId="29f2787d-1f96-45bd-963a-4ef84d87d89c",e.notificationId="173cf904-2157-434e-b6d9-09d78b12b5b3",e.companyId="1fb6721d-8058-4a00-a3c6-dc21ee13fee1",e.companyPersonsId="1d845584-e6ac-477c-b644-a55ecdf3ce9d",e.payrollsId="facdc1eb-7756-4ee2-8250-401ab6649673",e.salaryCardId="8923b35e-5561-4a14-9c6a-7eb82ea4ad75",e.cardIssueApplicationId="7e8e1bdf-c8e7-4e4e-be73-c93ed00a18e4",e}(a||{})},668:(M,E,t)=>{"use strict";t.d(E,{P:()=>a});var a=function(e){return e.Revoked="Revoked",e.Denied="Denied",e.Expired="Expired",e.WaitActivation="WaitActivation",e.InProcess="InProcess",e.Working="Working",e.Blocked="Blocked",e.ToSign="ToSign",e}(a||{})},6778:(M,E,t)=>{"use strict";t.d(E,{$:()=>a});var a=function(e){return e.TODAY_ONLY="todayOnly",e.YESTERDAY_ONLY="yesterdayOnly",e.LAST_WEEK="lastWeek",e.LAST_MONTH="lastMonth",e.CUSTOM_DATE="customDate",e}(a||{})},9449:(M,E,t)=>{"use strict";t.d(E,{Bf:()=>l.B,g9:()=>f,Ri:()=>h.R,aU:()=>e,X:()=>n,C0:()=>D,E_:()=>a});var a=function(s){return s.currencyExchangeOperationId="1f590c4c-69cb-11eb-bb71-005056a37d1d",s.createCardId="876fb601-a065-482d-a912-16a12ab0c3f6",s.companyParamId="221e80a5-af48-41b0-9852-02f21a555ca7",s.dismissCompanyEmployeeId="c5d3be7c-fcb5-43ca-b9e9-5911484499c1",s.newPayrollId="4eddfac8-566b-4096-94f6-5786bf4cb1c4",s.newPayrollIdV2="87275d82-0b77-4843-a6d0-009617032879",s.newCompanyPersonId="60ef1011-54af-4cd0-b8f3-c3803c0f2f08",s.newEmployeeId="4fe90131-00ff-4899-ab87-ebadba379eea",s.editEmployeeId="62890e28-6ab8-497a-9ea2-db229a185ba3",s.dismissApplicationId="c5d3be7c-fcb5-43ca-b9e9-5911484499c1",s.orderCardApplicationId="876fb601-a065-482d-a912-16a12ab0c3f6",s.activeLoans="f6e771d3-a8fd-4506-9617-9bbefd5b16e7",s.closedLoans="b3151621-141c-476e-b83d-10676589d619",s.connectionApplicationId="ba69f15f-aeb6-4ba7-8511-dbb7a946eb44",s.companyConfirmApplicationId="1de9d8ed-512d-4c3d-a91e-c26d7d562cdc",s.createInvoice="5fa5c218-346f-4842-b10f-6edd92864f20",s.createInvoiceService="c8ae75f0-29e3-49a3-930a-908f1c34fe2e",s.payrollCardIssueId="4c83e43c-d4b0-4499-aacb-d17716b89036",s.currencyExchangeApplication="e0b71025-1d4a-4e0b-ba4a-0136c8139ae8",s}(a||{}),e=function(s){return s.salaryProject="SalaryProject",s.invoice="Invoice",s.accountablePayroll="AccountablePayroll",s.selfEmployedPayroll="SelfEmployedPayroll",s}(e||{}),l=t(531),n=function(s){return s.CONNECTED="CONNECTED",s.IN_PROCESS="IN_PROCESS",s.CONNECT="CONNECT",s}(n||{}),h=(t(668),t(9503)),D=function(s){return s[s.Default=1]="Default",s[s.Connectable=2]="Connectable",s[s.Optional=3]="Optional",s}(D||{}),f=function(s){return s.reloadCategories="reload-categories",s.refreshTable="refresh-table",s}(f||{})},9503:(M,E,t)=>{"use strict";t.d(E,{R:()=>a});var a=function(e){return e.DRAFT="DRAFT",e.COMPLETED="COMPLETED",e.TO_SIGN_2="TO_SIGN_2",e.REJECTED="REJECTED",e.IN_PROCESS="IN_PROCESS",e.TO_SIGN="TO_SIGN",e.OUTDATED="OUTDATED",e.CREATED="CREATED",e.PASSIVE="PASSIVE",e.ACTIVE="ACTIVE",e.WORK="WORK",e}(a||{})},304:(M,E,t)=>{"use strict";t.d(E,{e:()=>f});var a=t(1180),e=t(9862),l=t(8645),n=t(2853),d=t(1473),h=t(5879),D=t(309);let f=(()=>{var s;class y{constructor(c,p){(0,a.Z)(this,"http",void 0),(0,a.Z)(this,"tokenService",void 0),(0,a.Z)(this,"endSession$",new l.x),(0,a.Z)(this,"temporaryToken",void 0),(0,a.Z)(this,"oldTemporaryToken",void 0),(0,a.Z)(this,"stepTempTokens",{newPassword:null,firstPassword:null,twoFaRegister:null,twoFa:null}),this.http=c,this.tokenService=p}get isAuthenticated(){return!!this.tokenService.accessToken&&!!this.tokenService.refreshToken}hello(){return this.http.post(`${n.N.webApi}/${n.N.api.identities}/${n.N.api.hello}`,(0,d.dz)())}login(c){return this.http.post(`${n.N.webApi}/${n.N.api.identities}/${n.N.api.authenticate}`,c)}setPassword(c){return this.http.post(`${n.N.webApi}/${n.N.api.identities}/${n.N.api.setPassword}`,c)}enterSignVerify(c){return this.http.post(`${n.N.webApi}/${n.N.api.identities}/${n.N.api.enter2FaSign}`,c)}refresh(c){const p=this.tokenService.getTokens();return c&&(p.companyId=c),this.http.post(`${n.N.webApi}/${n.N.api.identities}/${n.N.api.refresh}`,p)}generateQr(){return this.http.post(`${n.N.webApi}/${n.N.api.identities}/${n.N.api.generateQr}`,{})}setTwoFaCode(c){return this.http.post(`${n.N.webApi}/${n.N.api.identities}/${n.N.api.enterFaCode}`,{sign:{code:c}})}signerPing(){const c=new e.WM;return this.http.post(`${n.N.signerPath}/${n.N.api.ping}`,{},{headers:c})}logout(){return this.http.post(`${n.N.webApi}/${n.N.api.identities}/${n.N.api.logout}`,{})}newPassword(c){return this.http.post(`${n.N.webApi}/${n.N.api.identities}/${n.N.api.changePassword}`,c)}forgotPassword(c){return this.http.post(`${n.N.webApi}/${n.N.api.identities}/${n.N.api.forgotPassword}`,c)}enterCodeForgotPassword(c){return this.http.post(`${n.N.webApi}/${n.N.api.identities}/${n.N.api.forgotPassword}/${n.N.api.enterFaCode}`,c)}}return s=y,(0,a.Z)(y,"\u0275fac",function(c){return new(c||s)(h.LFG(e.eN),h.LFG(D.B))}),(0,a.Z)(y,"\u0275prov",h.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})),y})()},1763:(M,E,t)=>{"use strict";t.d(E,{T:()=>f});var a=t(1180),e=t(8645),l=t(2853),n=t(9921),d=t(5879),h=t(9347),D=t(9862);let f=(()=>{var s;class y{constructor(c,p){(0,a.Z)(this,"dialog",void 0),(0,a.Z)(this,"http",void 0),(0,a.Z)(this,"hasDialog",void 0),(0,a.Z)(this,"hasTechnicalDialog",void 0),(0,a.Z)(this,"serverError$",new e.x),(0,a.Z)(this,"show$",new e.x),this.dialog=c,this.http=p}showAlert(c,p){return this.dialog.open(n.h,{data:c,maxWidth:"90vw",id:p}).afterClosed()}send(c){return this.http.post(`${l.N.webApi}/web-app-log`,c)}}return s=y,(0,a.Z)(y,"\u0275fac",function(c){return new(c||s)(d.LFG(h.uw),d.LFG(D.eN))}),(0,a.Z)(y,"\u0275prov",d.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})),y})()},2437:(M,E,t)=>{"use strict";t.d(E,{u:()=>l});var a=t(1180),e=t(5879);let l=(()=>{var n;class d{constructor(){}get(D){return sessionStorage.getItem(D)}set(D,f){f="string"==typeof f?f:JSON.stringify(f),sessionStorage.setItem(D,f)}remove(D){sessionStorage.removeItem(D)}clear(){sessionStorage.clear()}}return n=d,(0,a.Z)(d,"\u0275fac",function(D){return new(D||n)}),(0,a.Z)(d,"\u0275prov",e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})),d})()},309:(M,E,t)=>{"use strict";t.d(E,{B:()=>T});var a=t(1180);const e="accessToken",l="refreshToken",n="refreshDateTimeExpire";var d=t(8645),h=t(6676),D=t(2413),f=t(2853),s=t(5879),y=t(2437);let T=(()=>{var c;class p{constructor(m){(0,a.Z)(this,"storage",void 0),(0,a.Z)(this,"refreshedToken$",new d.x),(0,a.Z)(this,"_accessToken",void 0),(0,a.Z)(this,"_refreshToken",void 0),(0,a.Z)(this,"_refreshDateTimeExpire",void 0),(0,a.Z)(this,"_initDate",void 0),this.storage=m}get accessToken(){return this._accessToken||(this._accessToken=this.storage.get(e)),this._accessToken}get refreshToken(){return this._refreshToken||(this._refreshToken=this.storage.get(l)),this._accessToken}get refreshDateTimeExpire(){return this._refreshDateTimeExpire||(this._refreshDateTimeExpire=this.storage.get(n)),this._refreshDateTimeExpire}get initDate(){return this._initDate||(this._initDate=new Date(JSON.parse(this.storage.get("CURRENT_DATE")))),this._initDate}setTokens(m){this._accessToken=m.accessToken,this._refreshToken=m.refreshToken,this._refreshDateTimeExpire=m.refreshTokenDuration,this._initDate=new Date,this.storage.set(e,m.accessToken),this.storage.set(l,m.refreshToken),this.storage.set(n,m.refreshTokenDuration),this.storage.set("CURRENT_DATE",this._initDate),this.refreshedToken$.next(!0)}getTokens(){return{accessToken:this.storage.get(e),refreshToken:this.storage.get(l)}}clearTokens(){this.storage.remove(e),this.storage.remove(l),this.storage.remove(n),this._accessToken=null,this._refreshToken=null,this._refreshDateTimeExpire=null}getExpireSecondTime(){const m=(this.refreshDateTimeExpire||"").split(":"),I=parseInt(m[1],10);return parseInt(m[2],10)+60*I-h().diff(this.initDate,"second")}isExpireRefreshTime(){return this.getExpireSecondTime()<0}getHelloToken(){const m=(new Date).getTime().toString().slice(0,10),I=(0,D.sha256)(`61184242-3c92-4b1d-97dc-be5b7b131c1d:${m}:${f.N.key}`).toLowerCase();return btoa(I)+"."+btoa(m.toString())}}return c=p,(0,a.Z)(p,"\u0275fac",function(m){return new(m||c)(s.LFG(y.u))}),(0,a.Z)(p,"\u0275prov",s.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})),p})()},1473:(M,E,t)=>{"use strict";t.d(E,{Bh:()=>N,Bl:()=>x,F:()=>k,G3:()=>F,G4:()=>A,I8:()=>P,Mn:()=>p,Ox:()=>y,S7:()=>U,UF:()=>m,Ug:()=>f,dz:()=>D,iP:()=>L,oA:()=>I,oT:()=>c,q_:()=>W,rt:()=>s});var a=t(6676),l=t(6778),n=t(2853),d=t(9449);function h(){let g="Unknown OS";return-1!==navigator.userAgent.indexOf("Win")&&(g="Windows OS"),-1!==navigator.userAgent.indexOf("Mac")&&(g="Macintosh"),-1!==navigator.userAgent.indexOf("Linux")&&(g="Linux OS"),-1!==navigator.userAgent.indexOf("Android")&&(g="Android OS"),-1!==navigator.userAgent.indexOf("like Mac")&&(g="iOS"),g}function D(){return{device:{id:"61184242-3c92-4b1d-97dc-be5b7b131c1d",name:navigator.userAgent,appVersion:n.N.appVersion,appMenuVersion:"1",model:navigator.platform,os:h(),platform:"0fcb4738-b85d-4f74-b5b7-a0292fbd6445",type:"browser",isRooted:!1}}}function f(g){switch(a().diff(g,"days")){case 0:return l.$.TODAY_ONLY;case 1:return l.$.YESTERDAY_ONLY;case 7:return l.$.LAST_WEEK;case 28:case 29:case 30:case 31:return l.$.LAST_MONTH;default:return l.$.CUSTOM_DATE}}function s(g){const v=[];for(const O in g)if(g.hasOwnProperty(O)&&g[O]){if(g[O]instanceof Date){v.push({key:O,value:a(g[O]).toISOString(!0)});continue}v.push({key:O,value:g[O]})}return v}function y(g){return/^0{8}-0{4}-0{4}-0{4}-0{12}$/g.test(g)}function c(g,v=2){const O=g>=0?1:-1;return+(Math.round(g*Math.pow(10,v)+.001*O)/Math.pow(10,v)).toFixed(v)}function p(){return"function"==typeof window.matchMedia&&window.matchMedia("(max-width: 767.98px)").matches}function m(g,v){const O={serviceId:"",fields:[]};for(const R in g)if(g.hasOwnProperty(R)){if("boolean"==typeof g[R])g[R]=g[R]?"true":"false";else if("documentFiles"===R){O.files=g[R];continue}if(null===g[R]||!g[R]?.length&&"number"!=typeof g[R]){if(g[R]instanceof Date){const $=g[R]._i;O.fields.push({key:R,value:"string"==typeof $?$:v.transform(g[R].toString(),"yyyy-MM-dd")})}}else O.fields.push({key:R,value:g[R].toString()})}return O}function I(g){return!!g&&"true"===g.toLowerCase()}function x(g){return!(!g||"string"!=typeof g||"true"!==g.toLowerCase()&&"false"!==g.toLowerCase())}function N(g){const v=document.querySelector(".main-content");if(!v||!g)return;const R=g.getBoundingClientRect().bottom-(v.scrollTop+window.innerHeight/2);v.scrollTop+=R}function L(g){const v=document.querySelector(g);v&&v.scrollTo({top:0,left:0,behavior:"smooth"})}function P(g){return JSON.parse(JSON.stringify(g))}function F(){const g=encodeURIComponent("selectedLanguage"),O=new RegExp("(?:^"+g+"|;\\s*"+g+")=(.*?)(?:;|$)","g").exec(document.cookie);return O&&decodeURIComponent(O[1])||document.head.parentElement.lang}function U(){const g=navigator.userAgent;let v,O=g.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(O[1])?(v=/\brv[ :]+(\d+)/g.exec(g)||[],{name:"IE",version:+(v[1]||"")}):"Chrome"===O[1]&&(v=g.match(/(\bOPR|Edge(?=\/))\/?\s*(\d+)/),null!=v)?{name:"OPR"===v[1]?"Opera":v[1],version:+v[2]}:(O=O[2]?[O[1],O[2]]:[navigator.appName,navigator.appVersion,"-?"],v=g.match(/version\/(\d+)/i),null!==v&&O.splice(1,1,v[1]),{name:O[0],version:+O[1]})}function k(){caches.keys().then(g=>Promise.all(g.map(v=>caches.delete(v))))}function W(g,v=0,O=0,R=0){return g.set({hour:v,minute:O,second:R}).format()}function A(g,v){return v&&(v.code===d.X.CONNECTED||v.code===d.X.IN_PROCESS)&&g.forEach(R=>R.actions=[]),g}},9921:(M,E,t)=>{"use strict";t.d(E,{h:()=>D});var a=t(1180),e=t(9347),l=t(9515),n=t(6814),d=t(5879);function h(f,s){if(1&f&&(d.TgZ(0,"div",6),d._uU(1),d.qZA()),2&f){const y=d.oxw();d.xp6(1),d.hij(" ",y.data.subtitle," ")}}let D=(()=>{var f;class s{constructor(T,c,p){(0,a.Z)(this,"data",void 0),(0,a.Z)(this,"cdr",void 0),(0,a.Z)(this,"dialogRef",void 0),this.data=T,this.cdr=c,this.dialogRef=p}onClose(T){T.preventDefault(),T.stopPropagation(),this.dialogRef.close(!0),this.cdr.markForCheck()}}return f=s,(0,a.Z)(s,"\u0275fac",function(T){return new(T||f)(d.Y36(e.WI),d.Y36(d.sBO),d.Y36(e.so))}),(0,a.Z)(s,"\u0275cmp",d.Xpm({type:f,selectors:[["eb-alert-dialog"]],standalone:!0,features:[d.jDz],decls:9,vars:6,consts:[[1,"dialog","small"],[1,"dialog-close",3,"mat-dialog-close"],["data-testid","dialog-title",1,"dialog-title"],["class","dialog-content2 mb-4",4,"ngIf"],[1,"dialog-actions","single"],["data-testid","close-modal",1,"btn","btn-primary",3,"click"],[1,"dialog-content2","mb-4"]],template:function(T,c){1&T&&(d.TgZ(0,"div",0),d._UZ(1,"div",1),d.TgZ(2,"h3",2),d._uU(3),d.qZA(),d.YNc(4,h,2,1,"div",3),d.TgZ(5,"div",4)(6,"button",5),d.NdJ("click",function(C){return c.onClose(C)}),d._uU(7),d.ALo(8,"translate"),d.qZA()()()),2&T&&(d.xp6(1),d.Q6J("mat-dialog-close",!1),d.xp6(2),d.hij(" ",null==c.data?null:c.data.title," "),d.xp6(1),d.Q6J("ngIf",null==c.data?null:c.data.subtitle),d.xp6(3),d.hij(" ",d.lcZ(8,4,"shared.close")," "))},dependencies:[e.Is,e.ZT,l.aw,l.X$,n.O5],styles:['@charset "UTF-8";.cdk-overlay-container[_ngcontent-%COMP%]{z-index:999}.cdk-overlay-dark-backdrop[_ngcontent-%COMP%]{background:rgba(0,0,0,.6);width:100%;height:100%}.mat-dialog-container[_ngcontent-%COMP%]{box-shadow:0 6px 20px #00000029;border-radius:12px!important;padding:0!important}.mat-dialog-content[_ngcontent-%COMP%]{overflow-x:hidden!important}.dialog[_ngcontent-%COMP%]{padding:40px 32px 32px;max-width:896px;min-height:350px;width:688px;border-radius:12px;position:relative;max-height:calc(100vh - 100px);overflow:hidden}.dialog.small[_ngcontent-%COMP%]{padding:36px 32px 32px;width:448px;min-height:auto}.dialog.small[_ngcontent-%COMP%]   .dialog-icon[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:.5rem}.dialog.small[_ngcontent-%COMP%]   .dialog-title[_ngcontent-%COMP%]{font-size:1.25rem}.dialog-close[_ngcontent-%COMP%]{background-image:url(/assets/icons/actions/close.svg);background-repeat:no-repeat;width:14px;height:14px;cursor:pointer;position:absolute;right:18px;top:18px}.dialog-title[_ngcontent-%COMP%]{font-size:1.5rem;color:#212121;margin:0 0 26px;font-weight:600;text-align:center}.dialog-content2[_ngcontent-%COMP%]{margin:0 0 39px;text-align:center;color:#adb5bd}.dialog-body[_ngcontent-%COMP%]{overflow-y:auto;max-height:50vh}.dialog-subtitle[_ngcontent-%COMP%]{text-align:center}.dialog-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.dialog-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;background-color:#fff;z-index:1}.dialog-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]:after{position:absolute;bottom:5px;content:"";width:calc(100% - 5px);border:1px solid #212121}.dialog-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]:before{content:"";display:block;height:10px}.dialog-table[_ngcontent-%COMP%]   tr.no-content[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;font-weight:500;padding:20px 10px 30px}.dialog-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 4px;font-size:.875rem}.dialog-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 0;font-size:.75rem;font-weight:600;color:#212121;text-align:left}.dialog-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-of-type{text-align:left}.dialog-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-of-type{text-align:right;padding-right:10px}.dialog[_ngcontent-%COMP%]   .is-invalid[_ngcontent-%COMP%]{color:#dc3545}.dialog-field[_ngcontent-%COMP%]{border:1px solid #e9ecef;height:72px;border-radius:8px;cursor:pointer;width:calc(100% - 20px);display:flex;align-items:center}.dialog-field[_ngcontent-%COMP%]:hover{background-color:#e6ebf399}.dialog-field[_ngcontent-%COMP%] > eb-small-preloader[_ngcontent-%COMP%]{position:absolute;right:50px}.dialog-field.invalid[_ngcontent-%COMP%]{border:1px solid #dc3545}.dialog[_ngcontent-%COMP%]   .upload-file-field[_ngcontent-%COMP%]{display:none}.dialog-label[_ngcontent-%COMP%]{color:#212121}.dialog-label[_ngcontent-%COMP%]:hover{text-decoration:underline}.dialog-actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.dialog-actions.single[_ngcontent-%COMP%]{justify-content:center}.dialog-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{height:56px;min-width:184px;border-radius:8px;justify-content:center;width:calc(50% - 10px)}@media (max-width: 767.98px){.dialog[_ngcontent-%COMP%]{width:90vw;max-width:688px}.dialog.small[_ngcontent-%COMP%]{max-width:448px;padding:36px 22px 26px;width:90vw}.dialog-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:50%;min-width:130px}.dialog-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child{margin-right:.5rem}}'],changeDetection:0})),s})()},9376:(M,E,t)=>{"use strict";t.d(E,{I:()=>y});var a=t(1180),e=t(9347),l=t(6814),n=t(9515),d=t(1848),h=t(5879);const D=function(){return{width:"40px",height:"40px"}};function f(T,c){if(1&T&&(h.TgZ(0,"div",7),h._UZ(1,"svg-icon",8),h.qZA()),2&T){const p=h.oxw();h.xp6(1),h.Q6J("src",p.data.icon)("svgStyle",h.DdM(2,D))}}function s(T,c){if(1&T&&(h.TgZ(0,"div",9)(1,"div",10),h._uU(2),h.qZA()()),2&T){const p=h.oxw();h.xp6(2),h.Oqu(p.data.body)}}let y=(()=>{var T;class c{constructor(C,m,I){(0,a.Z)(this,"data",void 0),(0,a.Z)(this,"cdr",void 0),(0,a.Z)(this,"dialogRef",void 0),this.data=C,this.cdr=m,this.dialogRef=I}onClose(C){C.preventDefault(),C.stopPropagation(),this.dialogRef.close(!0),this.cdr.markForCheck()}}return T=c,(0,a.Z)(c,"\u0275fac",function(C){return new(C||T)(h.Y36(e.WI),h.Y36(h.sBO),h.Y36(e.so))}),(0,a.Z)(c,"\u0275cmp",h.Xpm({type:T,selectors:[["eb-error-dialog"]],standalone:!0,features:[h.jDz],decls:10,vars:7,consts:[[1,"dialog","small"],[1,"search-list-dialog-close",3,"mat-dialog-close"],["class","dialog-icon",4,"ngIf"],["data-testid","error-title",1,"dialog-title"],["class","dialog-body",4,"ngIf"],[1,"dialog-actions","single","mt-5"],["data-testid","close-dialog-error",1,"btn","btn-primary",3,"click"],[1,"dialog-icon"],[3,"src","svgStyle"],[1,"dialog-body"],["data-testid","error-subtitle",1,"dialog-subtitle"]],template:function(C,m){1&C&&(h.TgZ(0,"div",0),h._UZ(1,"div",1),h.YNc(2,f,2,3,"div",2),h.TgZ(3,"h3",3),h._uU(4),h.qZA(),h.YNc(5,s,3,1,"div",4),h.TgZ(6,"div",5)(7,"button",6),h.NdJ("click",function(x){return m.onClose(x)}),h._uU(8),h.ALo(9,"translate"),h.qZA()()()),2&C&&(h.xp6(1),h.Q6J("mat-dialog-close",!1),h.xp6(1),h.Q6J("ngIf",m.data.icon),h.xp6(2),h.Oqu(m.data.title),h.xp6(1),h.Q6J("ngIf",m.data.body),h.xp6(3),h.hij(" ",h.lcZ(9,5,"shared.close")," "))},dependencies:[l.ez,l.O5,e.Is,e.ZT,n.aw,n.X$,d._J,d.bk],changeDetection:0})),c})()},1785:(M,E,t)=>{"use strict";t.d(E,{A:()=>c});var a=t(1180),e=t(6814),l=t(4716),n=t(5879),d=t(9862);function h(p,C){if(1&p&&(n.TgZ(0,"h4",18),n._uU(1),n.qZA()),2&p){const m=n.oxw().$implicit;n.xp6(1),n.hij(" ",m.title," ")}}function D(p,C){if(1&p&&(n.TgZ(0,"div",15),n.YNc(1,h,2,1,"h4",16),n._UZ(2,"p",17),n.qZA()),2&p){const m=C.$implicit;n.xp6(1),n.Q6J("ngIf",m.title),n.xp6(1),n.Q6J("innerHTML",m.description,n.oJD)}}function f(p,C){1&p&&n._UZ(0,"span",19)}function s(p,C){1&p&&(n.TgZ(0,"span"),n._uU(1,"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"),n.qZA())}function y(p,C){1&p&&n._UZ(0,"span",19)}function T(p,C){1&p&&(n.TgZ(0,"span"),n._uU(1,"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"),n.qZA())}let c=(()=>{var p;class C{constructor(I){(0,a.Z)(this,"http",void 0),(0,a.Z)(this,"features",void 0),(0,a.Z)(this,"loading",void 0),this.http=I}ngOnInit(){this.getData()}getData(){this.loading=!0,this.http.get("/assets/data.json").pipe((0,l.x)(()=>this.loading=!1)).subscribe(I=>this.features=I)}close(){this.loading=!0,window.location.reload()}ngOnDestroy(){this.close()}}return p=C,(0,a.Z)(C,"\u0275fac",function(I){return new(I||p)(n.Y36(d.eN))}),(0,a.Z)(C,"\u0275cmp",n.Xpm({type:p,selectors:[["eb-new-features-dialog"]],standalone:!0,features:[n.jDz],decls:20,vars:5,consts:[[1,"dialog"],[1,"dialog-close",3,"click"],[1,"dialog-left"],[1,"features-title"],["src","assets/images/update.png","alt","",1,"image"],[1,"dialog-right"],[1,"dialog-right-title"],[1,"dialog-right-items","scroll","eb-jc-center"],["class","item",4,"ngFor","ngForOf"],[1,"dialog-right-action"],["type","submit",1,"btn","btn-primary",3,"click"],["class","btn-loader",4,"ngIf"],[4,"ngIf"],[1,"mobile-background","mt-5"],["src","assets/images/update-mobile.webp","alt","",1,"mobile-background-image"],[1,"item"],["class","item-title",4,"ngIf"],[1,"item-description",3,"innerHTML"],[1,"item-title"],[1,"btn-loader"]],template:function(I,x){1&I&&(n.TgZ(0,"div",0)(1,"div",1),n.NdJ("click",function(){return x.close()}),n.qZA(),n.TgZ(2,"div",2)(3,"h1",3),n._uU(4,"\u041d\u043e\u0432\u044b\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0432 \u042d\u0441\u0445\u0430\u0442\u0430 \u0411\u0438\u0437\u043d\u0435\u0441"),n.qZA(),n._UZ(5,"img",4),n.qZA(),n.TgZ(6,"div",5)(7,"h3",6),n._uU(8,"\u0427\u0442\u043e \u043d\u043e\u0432\u043e\u0433\u043e:"),n.qZA(),n.TgZ(9,"div",7),n.YNc(10,D,3,2,"div",8),n.qZA(),n.TgZ(11,"div",9)(12,"button",10),n.NdJ("click",function(){return x.close()}),n.YNc(13,f,1,0,"span",11),n.YNc(14,s,2,0,"span",12),n.qZA()()(),n.TgZ(15,"div",13),n._UZ(16,"img",14),n.TgZ(17,"button",10),n.NdJ("click",function(){return x.close()}),n.YNc(18,y,1,0,"span",11),n.YNc(19,T,2,0,"span",12),n.qZA()()()),2&I&&(n.xp6(10),n.Q6J("ngForOf",x.features),n.xp6(3),n.Q6J("ngIf",x.loading),n.xp6(1),n.Q6J("ngIf",!x.loading),n.xp6(4),n.Q6J("ngIf",x.loading),n.xp6(1),n.Q6J("ngIf",!x.loading))},dependencies:[e.ez,e.sg,e.O5],styles:['@charset "UTF-8";.dialog[_ngcontent-%COMP%]{max-width:882px;width:100%;display:grid;grid-template-columns:60% 40%;padding:0;border-radius:0}.dialog-left[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:100%;display:block}.dialog-left[_ngcontent-%COMP%]   .features-title[_ngcontent-%COMP%]{padding:3rem;font-weight:600;font-size:2.5rem;line-height:2.75rem;color:#1b2430;margin:0}.dialog[_ngcontent-%COMP%]   .mobile-background[_ngcontent-%COMP%]{display:none}.dialog-right[_ngcontent-%COMP%]{padding:2rem 2rem 2rem 1rem;display:flex;flex-direction:column;justify-content:space-evenly;gap:1rem}.dialog-right-title[_ngcontent-%COMP%]{margin:0;font-weight:600;font-size:1rem;line-height:1.5rem;color:#101822}.dialog-right-items[_ngcontent-%COMP%]{height:44vh;overflow-y:auto}.dialog-right-items[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5rem;color:#57616e;margin:0 0 .75rem}.dialog-right-items[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{display:flex;justify-content:center}.dialog-right-action[_ngcontent-%COMP%]{padding-left:1rem}.dialog-right-action[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin:0 auto;width:240px;height:60px;background-color:#2019ed}@media (max-width: 767.98px){.dialog[_ngcontent-%COMP%]{overflow-y:auto;grid-template-columns:100%;padding:0}.dialog-left[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{display:none}.dialog-left[_ngcontent-%COMP%]   .features-title[_ngcontent-%COMP%]{padding:2rem 2rem 0;color:#4e49ce;font-weight:600;font-size:2rem;line-height:40px}.dialog-right[_ngcontent-%COMP%]{padding:0 2rem}.dialog-right-title[_ngcontent-%COMP%]{display:none}.dialog-right-items[_ngcontent-%COMP%]{height:35vh}.dialog-right-items[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]{font-size:1.25rem;color:#212121;margin:2rem 0 1rem}.dialog-right-items[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%]{line-height:24px}.dialog-right-action[_ngcontent-%COMP%]{display:none}.dialog[_ngcontent-%COMP%]   .mobile-background[_ngcontent-%COMP%]{display:block;margin-top:2rem;position:relative;text-align:center;width:100%}.dialog[_ngcontent-%COMP%]   .mobile-background-image[_ngcontent-%COMP%]{width:100%}.dialog[_ngcontent-%COMP%]   .mobile-background[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{position:absolute;bottom:25px;width:276px;left:0;right:0;margin-left:auto;margin-right:auto}}']})),C})()},2853:(M,E,t)=>{"use strict";t.d(E,{N:()=>d});const e="https://business.eskhata.com:1451/",n=e.includes(window.location.hostname)?e:"https://business.eskhata.tj:1451/",d={production:!0,isTestSite:!1,domain:n,apiUrl:n+"api",webApi:n+"api/v2.2",key:"Gn4SUcxn3gPM2CRRWPBbJAurU8b5vWaw",signerPath:"http://localhost:5030",apiVersion:"v2.2",appVersion:t(4147).i8,api:{accounts:"accounts",accountStatements:"account-statements",add:"add",applications:"applications",areas:"areas",authenticate:"authenticate",banks:"banks",block:"block",invoices:"invoices",unblock:"unblock",blockCurrentUser:"block-current-user",budgetClassifications:"budget-classifications",budgetOrganizations:"budget-organizations",cards:"cards",category:"categories",certificates:"certificates",changePassword:"change-password",changeEmail:"change-email",email:"email",check:"check",checkExistence:"check-existence",checkForSign:"check-for-sign",checkForSignMulti:"check-for-sign-multi",companies:"companies",confirmationData:"confirmation-data",confirmedData:"confirmed-data",companyContacts:"company-contacts",companyCurrentUserInfo:"company-current-user-info",companySync:"company-employees",companyUsers:"company-users",confirm:"confirm",sendConfirmCode:"send-confirm-code",resendConfirmCode:"resend-confirm-code",contacts:"contacts",grantAccess:"grant-access",contractor:"contractors",contractorsDictionary:"contractors/dictionary",contracts:"contracts",countries:"countries",create:"create",currencies:"currencies",currencyContracts:"currency-contracts",currencyControl:"currency-control",currencyExchanges:"currency-exchanges",currencyPaymentTypes:"currency-payment-types",currencyRates:"currency-rates",declarations:"declarations",deposits:"deposits",delete:"delete",detail:"detail",dictionary:"dictionary",documents:"documents",download:"download",edit:"edit",editAccounts:"edit-accounts",employees:"employees",enter2FaSign:"enter-2fa-sign-verify",enterFaCode:"enter-2fa-code",excel:"export-to-excel",exportTo1c:"export-to-1c",files:"files",firstSync:"first-sync",forgotPassword:"forgot-password",forPayment:"for-payment",generate:"generate",generateQr:"generate-qr-authenticator",hello:"hello",history:"history",identities:"identities",importFrom1C:"import-from-1c",info:"info",jobLog:"job-logs",languages:"languages",lastOperation:"last-operation",lastOperations:"last-operations",leave:"leave",lineChart:"line-chart",list:"list",loans:"loans",logout:"logout",mediatorBanks:"mediator-banks",merge:"merge",notifications:"notifications",notifyRead:"has-been-read",operations:"operations",pairs:"pairs",params:"params",payment:"payments",paymentFromStatement:"payment-from-account-statement",paymentTemplates:"payment-templates",payrolls:"payrolls",ping:"ping",preCheck:"pre-check",preview:"preview",products:"products",print:"print",printRepaymentsGraphic:"print-repayments-graphic",printMulti:"print-multi",purposePaymentCodes:"purpose-payment-codes",purposePaymentCodeUaes:"purpose-payment-code-uaes",pushToken:"set-push-token",refresh:"refresh-token",repaymentsGraphic:"repayments-graphic",revisionMessages:"revision-messages",refreshSignDate:"refresh-ready-to-sign-date",reissueCert:"certificate-reissue",remove:"remove",removeLogo:"remove-logo",removePhoto:"remove-photo",rename:"rename",repeat:"repeat",revoke:"revoke",revokeSign:"revoke-sign",salaryContracts:"salary-contracts",salaryProject:"salary-project",save:"save",sendToBank:"send-to-bank",services:"services",setPassword:"set-password",sign:"sign",start:"start",sync:"sync",templateForPayment:"for-payment",types:"types",unbind:"unbind",update:"update",uploadLogo:"upload-logo",uploadPhoto:"upload-photo",userInfoForCert:"user-info-for-creating-certificate",users:"users",userSettings:"user-settings",companyEmployeeDismiss:"company-employee-dismisses",companyEmployees:"company-employees",companyPerson:"company-persons",payrollAccounts:"payroll-accounts",forRestore:"for-restore",restore:"restore",revertChanges:"revert-changes",connectionApplications:"connection-applications",swiftMessage:"swift-message",selected:"selected",details:"details",imports:"imports",archive:"archive",fillUp:"fill-up",actionPreCheck:"action-pre-check",orderCard:"order-card",documentTypes:"document-types"},captchaSiteKey:"6LcHJwUgAAAAAPh3Z9tCwEq92X14GfOB2S0ZV0sL",platformKey:"f43513912feb6415775389c0af3606aa",firebase:{apiKey:"AIzaSyCyclTWwszYwoXQERl5ZiQgERiOtpwrbTY",authDomain:"eskhatabusiness-6b4a6.firebaseapp.com",projectId:"eskhatabusiness-6b4a6",storageBucket:"eskhatabusiness-6b4a6.appspot.com",messagingSenderId:"343552378666",appId:"1:343552378666:web:8ed22edac3898458ba4053",measurementId:"G-LSXS69CLXE",vapidKey:"BHeZE7394VuI4LmM-sAXLmpYqQgpCD_m3_bCTQ21kgn3oL888S7_fnuiziFbIVa-qEIMnYBwFh74MrboSEiwrBU"}}},5728:(M,E,t)=>{"use strict";var a=t(6593),e=t(5879),l=t(1180),n=t(9862),d=t(8504),h=t(9397),D=t(6306),f=function(o){return o[o.OK=0]="OK",o[o.UNKNOWN_ERROR=1]="UNKNOWN_ERROR",o[o.SERVICE_UNAVAILABLE=2]="SERVICE_UNAVAILABLE",o[o.API_DEPRECATED=3]="API_DEPRECATED",o[o.RESOURCE_NOT_FOUND=4]="RESOURCE_NOT_FOUND",o[o.ERROR_AUTH=5]="ERROR_AUTH",o[o.FORBIDDEN=6]="FORBIDDEN",o[o.TOKEN_EXPIRED=7]="TOKEN_EXPIRED",o[o.TOO_MANY_REQUESTS=8]="TOO_MANY_REQUESTS",o[o.NEED_TO_UPGRADE=9]="NEED_TO_UPGRADE",o[o.TIMEOUT=10]="TIMEOUT",o[o.BAD_REQUEST=12]="BAD_REQUEST",o[o.DUPLICATE_REQUEST=13]="DUPLICATE_REQUEST",o[o.LIMIT_EXCEEDED=14]="LIMIT_EXCEEDED",o[o.USER_TEMPORARILY_BLOCKED=15]="USER_TEMPORARILY_BLOCKED",o[o.TOKEN_REFRESH_EXPIRED=16]="TOKEN_REFRESH_EXPIRED",o[o.UNHANDLED_EXCEPTION=17]="UNHANDLED_EXCEPTION",o}(f||{}),s=t(2853),y=t(1473),T=t(9515);class c{constructor(r,b,i,_){(0,l.Z)(this,"errorService",void 0),(0,l.Z)(this,"authService",void 0),(0,l.Z)(this,"router",void 0),(0,l.Z)(this,"tokenService",void 0),(0,l.Z)(this,"translate",void 0),this.errorService=r,this.authService=b,this.router=i,this.tokenService=_,this.translate=(0,e.f3M)(T.sK)}intercept(r,b){return b.handle(r).pipe((0,h.b)(i=>{i?.body?.hasOwnProperty("status")&&!i?.body?.status&&this.errorHandler(i)}),(0,D.K)(i=>401===i.status?(this.logout(),(0,d._)(i)):(this.errorService.hasDialog||this.showError(i),(0,d._)(i))))}errorHandler(r){if((r.url.includes(`${s.N.api.payment}/${s.N.api.sign}`)||r.url.includes(s.N.signerPath)||r.url.includes("excel")||r.url.endsWith("files/add"))&&r.body.errors&&Object.keys(r.body.errors).length)return null;switch(r?.body?.errorCode){case f.BAD_REQUEST:case f.UNHANDLED_EXCEPTION:r?.body?.message&&!r?.url.includes("/authenticate")&&!r?.url.includes("/enter-2fa-code")&&!r?.url.includes("/forgot-password")&&!this.errorService.hasDialog&&!r?.url.includes("/set-password")&&!r?.url.includes("/merge")&&!r?.url.includes("/change-password")&&!r?.url.includes("/confirm-code")&&this.errorService.show$.next({body:r.body.message});break;case f.ERROR_AUTH:this.logout();break;case f.TOKEN_REFRESH_EXPIRED:this.router.url.includes(s.N.api.identities)&&this.logout();break;case f.SERVICE_UNAVAILABLE:this.errorService.hasTechnicalDialog||this.errorService.serverError$.next({body:r?.body?.message||this.translate.instant("messages.unknown-server-error")});break;default:!this.errorService.hasDialog&&!this.errorService.show$.closed&&this.errorService.show$.next({body:r?.body?.message||this.translate.instant("messages.unknown-server-error")})}}logout(){this.authService.temporaryToken=null,this.tokenService.clearTokens(),this.router.navigateByUrl(`/${(0,y.G3)()}/auth`).catch()}showError(r){if(r.url&&!r.url.endsWith("ping")){let b=this.translate.instant("messages.unknown-server-error");if(navigator.onLine){if(r.url.includes(s.N.signerPath))b=this.translate.instant("messages.signer-no-available"),this.authService.temporaryToken=this.authService.oldTemporaryToken;else if(r.error?.errorCode===f.SERVICE_UNAVAILABLE)return void this.errorService.serverError$.next({body:r.error?.message||this.translate.instant("messages.unknown-server-error")})}else b=this.translate.instant("messages.no-internet-connection");r&&!this.errorService.hasDialog&&!this.errorService.show$.closed&&this.errorService.show$.next({title:this.translate.instant("messages.error"),body:b})}}}var p=t(1763),C=t(304),m=t(309);let I=(()=>{var o;class r{constructor(i,_){(0,l.Z)(this,"authService",void 0),(0,l.Z)(this,"tokenService",void 0),this.authService=i,this.tokenService=_}intercept(i,_){let u={};i.url.includes(s.N.api.refresh)||(i.url.includes(s.N.signerPath)&&(u={"Content-Type":"application/json","Access-Control-Allow-Origin":"*",charset:"utf-8"}),u={setHeaders:{Authorization:`Bearer ${this.getToken(i.url)}`,"Current-Language":(0,y.G3)(),...u}});const Z=i.clone(u);return _.handle(Z)}getToken(i){return i.includes(s.N.api.hello)?this.tokenService.getHelloToken():(i.includes(s.N.api.identities)||i.includes(s.N.api.forgotPassword))&&!i.includes(s.N.api.logout)&&!i.includes("identities/refresh-token")||i.includes(s.N.api.connectionApplications)?this.authService.temporaryToken:this.tokenService.accessToken}}return o=r,(0,l.Z)(r,"\u0275fac",function(i){return new(i||o)(e.LFG(C.e),e.LFG(m.B))}),(0,l.Z)(r,"\u0275prov",e.Yz7({token:o,factory:o.\u0275fac})),r})();var x=t(5619),N=t(8645),L=t(9666),P=t(2096),F=t(1631),U=t(4664),k=t(4716),W=t(2181),A=t(9773);let g=(()=>{var o;class r{constructor(i,_,u){(0,l.Z)(this,"authService",void 0),(0,l.Z)(this,"errorService",void 0),(0,l.Z)(this,"tokenService",void 0),(0,l.Z)(this,"isRefreshingToken",!1),(0,l.Z)(this,"tokenSubject$",new x.X(null)),(0,l.Z)(this,"destroyQueue$",new N.x),(0,l.Z)(this,"errorCode",void 0),this.authService=i,this.errorService=_,this.tokenService=u}intercept(i,_){return _.handle(i).pipe((0,F.z)(u=>u.body&&u.body instanceof Blob?(0,L.D)(u.body.text()).pipe((0,F.z)(Z=>{const B=function v(o){try{return JSON.parse(o)}catch{return{errorCode:null,message:null}}}(Z);return this.errorCode=B.errorCode,this.errorCode?this.catchError(this.errorCode,u,B.message):(0,P.of)(u)})):this.catchError(u.body?.errorCode,u)),(0,D.K)(u=>{const Z=u.body?.errorCode||this.errorCode;return console.log("refresh-token",u),Z===f.TOKEN_EXPIRED?this.handleRefreshError(i,_):(0,d._)(u)}))}handleRefreshError(i,_){return console.log("isRefreshingToken",this.isRefreshingToken),this.isRefreshingToken?(console.log("\u043e\u0447\u0435\u0440\u0435\u0434\u044c"),this.tokenSubject$.pipe((0,W.h)(u=>null!=u),(0,U.w)(()=>_.handle(i)),(0,A.R)(this.destroyQueue$))):(this.isRefreshingToken=!0,i.url.includes(s.N.api.authenticate)?this.getTempToken(_,i):i.url.includes(s.N.api.identities)?(this.endSession(),this.isRefreshingToken=!1,(0,P.of)(null)):this.tokenService.refreshToken?.length?this.authService.refresh().pipe((0,U.w)(u=>(u.status&&(this.tokenService.setTokens(u.meta),this.tokenSubject$.next(this.tokenService.accessToken)),_.handle(i))),(0,k.x)(()=>this.isRefreshingToken=!1)):(console.log("\u041d\u0435 \u0441\u043c\u043e\u0433 \u0437\u0430\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0440\u0435\u0444\u0440\u0435\u0448 \u0442\u043e\u043a\u0435\u043d"),this.endSession(),this.destroyQueue$.next(!0),_.handle(i)))}getTempToken(i,_){return this.authService.hello().pipe((0,U.w)(u=>(this.authService.temporaryToken=u.meta.temporaryToken,i.handle(_))),(0,k.x)(()=>this.isRefreshingToken=!1))}endSession(){this.errorService.hasDialog||(this.errorService.hasDialog=!0,this.authService.endSession$.next(!0))}catchError(i,_,u=""){switch(i){case f.TOKEN_EXPIRED:return console.log("refresh-token",f.TOKEN_EXPIRED,_),(0,d._)(_);case f.TOKEN_REFRESH_EXPIRED:case f.ERROR_AUTH:return console.log("refresh-token",f.TOKEN_REFRESH_EXPIRED,_),this.errorService.hasDialog=!1,this.endSession(),(0,P.of)(null);case f.BAD_REQUEST:return _.body instanceof Blob?(this.errorService.show$.next({body:u}),(0,P.of)({status:!1})):(0,P.of)(_);default:return(0,P.of)(_)}}}return o=r,(0,l.Z)(r,"\u0275fac",function(i){return new(i||o)(e.LFG(C.e),e.LFG(p.T),e.LFG(m.B))}),(0,l.Z)(r,"\u0275prov",e.Yz7({token:o,factory:o.\u0275fac})),r})();var O=t(2787),R=t(8180),$=t(3182),K=function(o){return o[o.trace=0]="trace",o[o.debug=1]="debug",o[o.information=2]="information",o[o.warning=3]="warning",o[o.error=4]="error",o[o.critical=5]="critical",o[o.none=6]="none",o}(K||{});let X=(()=>{var o;class r{constructor(i){(0,l.Z)(this,"injector",void 0),this.injector=i}handleError(i){if(s.N.production||console.error(i),function Q(o){return!!(o instanceof n.UA&&[0,404,502].includes(o.status)||o.message&&o.message.includes("FirebaseError")||o.message&&o.message.includes("ChunkLoadError")||o instanceof $.ZR)||!s.N.production}(i))return;console.log(i);const _=this.injector.get(p.T),u={version:s.N.appVersion,logLevel:K.error,message:i.message,language:"ru",routeUrl:window.location.href,userAgent:navigator.userAgent};i instanceof n.UA?(u.message=i.statusText,u.data=i.message,u.logLevel=K.critical):u.data=i.stack,_.send(u).pipe((0,R.q)(1)).subscribe()}}return o=r,(0,l.Z)(r,"\u0275fac",function(i){return new(i||o)(e.LFG(e.zs3))}),(0,l.Z)(r,"\u0275prov",e.Yz7({token:o,factory:o.\u0275fac})),r})(),G=(()=>{var o;class r{}return o=r,(0,l.Z)(r,"\u0275fac",function(i){return new(i||o)}),(0,l.Z)(r,"\u0275mod",e.oAB({type:o})),(0,l.Z)(r,"\u0275inj",e.cJS({providers:[{provide:n.TP,useClass:c,multi:!0,deps:[p.T,C.e,O.F0,m.B]},{provide:n.TP,useClass:g,multi:!0,deps:[C.e,p.T,m.B]},{provide:n.TP,useClass:I,multi:!0,deps:[C.e,m.B]},{provide:e.qLn,useClass:X}],imports:[n.JF,n.JF]})),r})();var V=t(349),S=t(9347),H=t(7098),q=t(9376),j=t(1342),ee=t(6814);let Y=(()=>{var o;class r{constructor(){(0,l.Z)(this,"options",{path:"/assets/lottie/update.json"})}reloadPage(){location.reload()}}return o=r,(0,l.Z)(r,"\u0275fac",function(i){return new(i||o)}),(0,l.Z)(r,"\u0275cmp",e.Xpm({type:o,selectors:[["eb-technical-work-dialog"]],standalone:!0,features:[e.jDz],decls:16,vars:15,consts:[[1,"dialog","small"],[1,"search-list-dialog-close",3,"mat-dialog-close"],[1,"dialog-title"],[1,"dialog-body"],[1,"dialog-subtitle",3,"innerHTML"],[1,"mt-4","mb-4",3,"options"],[1,"dialog-actions"],[1,"btn","btn-stroked",3,"mat-dialog-close"],[1,"btn","btn-primary",3,"click"]],template:function(i,_){1&i&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e.TgZ(2,"h3",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",3),e._UZ(6,"div",4),e.ALo(7,"translate"),e._UZ(8,"ng-lottie",5),e.qZA(),e.TgZ(9,"div",6)(10,"button",7),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"button",8),e.NdJ("click",function(){return _.reloadPage()}),e._uU(14),e.ALo(15,"translate"),e.qZA()()()),2&i&&(e.xp6(1),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.hij(" ",e.lcZ(4,7,"dialogs.technical-work-dialog.update-in-progress")," "),e.xp6(3),e.Q6J("innerHTML",e.lcZ(7,9,"dialogs.technical-work-dialog.adding-new-features"),e.oJD),e.xp6(2),e.Q6J("options",_.options),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(1),e.hij(" ",e.lcZ(12,11,"shared.close")," "),e.xp6(3),e.hij(" ",e.lcZ(15,13,"shared.reload")," "))},dependencies:[ee.ez,S.Is,S.ZT,j.e$,T.aw,T.X$],styles:["[_nghost-%COMP%]   .dialog-subtitle[_ngcontent-%COMP%]{color:#8e9aaf}[_nghost-%COMP%]   .dialog-body[_ngcontent-%COMP%]{overflow:hidden}"],changeDetection:0})),r})();var te=t(1785),z=t(3009),J=t(8253);let ne=(()=>{var o;class r extends H.e{constructor(i,_,u,Z,B){super(),(0,l.Z)(this,"errorService",void 0),(0,l.Z)(this,"swUpdate",void 0),(0,l.Z)(this,"permissionService",void 0),(0,l.Z)(this,"dialog",void 0),(0,l.Z)(this,"translate",void 0),this.errorService=i,this.swUpdate=_,this.permissionService=u,this.dialog=Z,this.translate=B,this.removePwaCache(),this.initLocale()}ngOnInit(){this.setPermissions(),this.showError(),this.showTechnicalWorkDialog(),this.refreshPwa()}initLocale(){this.translate.addLangs(["ru","en","zh"]);const i=(0,y.G3)();this.translate.setDefaultLang(i||"ru"),this.translate.use(i.match(/ru|en|zh/)?i:"ru")}setPermissions(){const i=JSON.parse(sessionStorage.getItem("permissions"));i&&this.permissionService.loadPermissions(i)}showError(){this.errorService.show$.pipe((0,A.R)(this.destroyed$)).subscribe(({title:i,body:_})=>{this.showErrorDialog(i,_)})}showTechnicalWorkDialog(){this.errorService.serverError$.pipe((0,U.w)(({title:i,body:_})=>{if(this.dialog.getDialogById("technicalWork"))return;this.errorService.hasTechnicalDialog=!0;const u=new S.vA;return u.data={title:i,body:_},u.maxWidth="90vw",u.id="technicalWork",this.dialog.open(Y,u).afterOpened()}),(0,k.x)(()=>this.errorService.hasTechnicalDialog=!1),(0,A.R)(this.destroyed$)).subscribe(()=>this.errorService.hasTechnicalDialog=!1)}refreshPwa(){this.swUpdate.isEnabled&&((0,L.D)(this.swUpdate.activateUpdate()).pipe((0,A.R)(this.destroyed$)).subscribe(i=>{console.log("New app version successful updated",i)}),this.swUpdate.versionUpdates.pipe((0,A.R)(this.destroyed$)).subscribe(i=>{switch(i.type){case"VERSION_DETECTED":console.log(`Downloading new app version: ${i.version.hash}`);break;case"VERSION_READY":console.log(`Current app version: ${i.currentVersion.hash}`),console.log(`New app version ready for use: ${i.latestVersion.hash}`),!this.dialog.getDialogById("new-features")&&!s.N.isTestSite&&this.dialog.open(te.A,{id:"new-features"});break;case"VERSION_INSTALLATION_FAILED":console.log(`Failed to install app version '${i.version.hash}': ${i.error}`)}}),this.swUpdate.checkForUpdate().then(i=>console.log(i?"A new version is available.":"Already on the latest version.")).catch(i=>{console.error("Could not check for app updates",i)}))}showErrorDialog(i,_){if(this.dialog.getDialogById("error"))return;this.errorService.hasDialog=!0;const u=new S.vA;u.data={title:i,body:_},u.maxWidth="90vw",u.id="error",this.dialog.open(q.I,u).afterOpened().pipe((0,A.R)(this.destroyed$)).subscribe(()=>this.errorService.hasDialog=!1)}removePwaCache(){if("caches"in window&&s.N.production){const i=localStorage.getItem("version");i?i!==s.N.appVersion&&(localStorage.setItem("version",s.N.appVersion),(0,y.F)()):((0,y.F)(),localStorage.setItem("version",s.N.appVersion))}}}return o=r,(0,l.Z)(r,"\u0275fac",function(i){return new(i||o)(e.Y36(p.T),e.Y36(z.yO),e.Y36(J.YI),e.Y36(S.uw),e.Y36(T.sK))}),(0,l.Z)(r,"\u0275cmp",e.Xpm({type:o,selectors:[["eb-root"]],features:[e.qOj],decls:1,vars:0,template:function(i,_){1&i&&e._UZ(0,"router-outlet")},dependencies:[O.lC]})),r})();var oe=t(5904),ie=t.n(oe),se=t(1848),ae=t(8839),w=t(8019),ce=t(2437);const de=[{path:`:language/${w.h.HOME}`,canMatch:[()=>{const o=(0,e.f3M)(C.e),r=(0,e.f3M)(O.F0),b=(0,e.f3M)(m.B);return!(!o.isAuthenticated||b.isExpireRefreshTime())||(r.navigate([(0,y.G3)(),w.h.home]).catch(),!1)}],loadChildren:()=>Promise.all([t.e("default-src_app_core_services_cookie_service_ts-src_app_shared_shared_module_ts"),t.e("src_app_modules_main_main_routing_ts")]).then(t.bind(t,7810)).then(o=>o.MAIN_ROUTES),title:"categories.eskhata-business"},{path:`:language/${w.h.AUTH}`,canMatch:[()=>{const o=(0,e.f3M)(C.e),r=(0,e.f3M)(O.F0),i=(0,e.f3M)(ce.u).get("permissions");return!(o.isAuthenticated&&i&&i.length&&(r.navigate(["/",(0,y.G3)(),"main","accounts"]).catch(),1))}],loadChildren:()=>Promise.all([t.e("default-src_app_core_services_cookie_service_ts-src_app_shared_shared_module_ts"),t.e("default-src_app_shared_animations_router-fade_animation_ts-src_app_shared_design-system_foote-39fb75"),t.e("src_app_modules_auth_auth_routing_ts")]).then(t.bind(t,561)).then(o=>o.AUTH_ROUTES),title:"page.eskhata-business"},{path:`:language/${w.h.home}`,loadComponent:()=>Promise.all([t.e("default-src_app_core_services_cookie_service_ts-src_app_shared_shared_module_ts"),t.e("default-src_app_shared_animations_router-fade_animation_ts-src_app_shared_design-system_foote-39fb75"),t.e("src_app_modules_landing-page_landing-page_component_ts")]).then(t.bind(t,8106)).then(o=>o.LandingPageComponent)},{path:`:language/${w.h.offlineRegistration}`,loadComponent:()=>Promise.all([t.e("default-src_app_core_services_cookie_service_ts-src_app_shared_shared_module_ts"),t.e("default-src_app_shared_animations_router-fade_animation_ts-src_app_shared_design-system_foote-39fb75"),t.e("src_app_modules_landing-page_offline-registration_offline-registration_component_ts")]).then(t.bind(t,7966)).then(o=>o.OfflineRegistrationComponent)},{path:`:language/${w.h.onlineRegistration}`,loadComponent:()=>Promise.all([t.e("default-src_app_core_services_cookie_service_ts-src_app_shared_shared_module_ts"),t.e("default-src_app_shared_animations_router-fade_animation_ts-src_app_shared_design-system_foote-39fb75"),t.e("default-src_app_shared_design-system_input_input_component_ts-node_modules_ng-recaptcha_fesm2-d3858c"),t.e("common"),t.e("src_app_modules_landing-page_online-registration_online-registration_component_ts")]).then(t.bind(t,8880)).then(o=>o.OnlineRegistrationComponent)},{path:"**",redirectTo:`/${(0,y.G3)()}/${w.h.HOME}/accounts`,pathMatch:"full"}];let ge=(()=>{var o;class r{}return o=r,(0,l.Z)(r,"\u0275fac",function(i){return new(i||o)}),(0,l.Z)(r,"\u0275mod",e.oAB({type:o})),(0,l.Z)(r,"\u0275inj",e.cJS({imports:[O.Bz.forRoot(de),O.Bz]})),r})();var he=t(5061);let pe=(()=>{var o;class r extends O.eV{constructor(i,_){super(),(0,l.Z)(this,"translate",void 0),(0,l.Z)(this,"title",void 0),this.translate=i,this.title=_}updateTitle(i){const _=this.buildTitle(i);this.title.setTitle(this.translate.instant(_||"page.eskhata-business"))}}return o=r,(0,l.Z)(r,"\u0275fac",function(i){return new(i||o)(e.LFG(T.sK),e.LFG(a.Dx))}),(0,l.Z)(r,"\u0275prov",e.Yz7({token:o,factory:o.\u0275fac})),r})();function ue(){return ie()}function fe(o){return new he.w(o)}let me=(()=>{var o;class r{}return o=r,(0,l.Z)(r,"\u0275fac",function(i){return new(i||o)}),(0,l.Z)(r,"\u0275mod",e.oAB({type:o,bootstrap:[ne]})),(0,l.Z)(r,"\u0275inj",e.cJS({providers:[(0,ae.np)(),{provide:O.eV,useClass:pe}],imports:[a.b2,G,T.aw.forRoot({loader:{provide:T.Zw,useFactory:fe,deps:[n.eN]}}),se._J.forRoot(),J.VI.forRoot(),ge,V.PW,Y,z.Wr.register("ngsw-worker.js",{enabled:s.N.production,registrationStrategy:"registerWhenStable:30000"}),j.CT.forRoot({player:ue})]})),r})();s.N.production&&(0,e.G48)(),a.q6().bootstrapModule(me).catch(o=>console.error(o))},5520:(M,E,t)=>{var a={"./ru":1828,"./ru.js":1828,"./tg":6987,"./tg.js":6987,"./zh-cn":7280,"./zh-cn.js":7280};function e(n){var d=l(n);return t(d)}function l(n){if(!t.o(a,n)){var d=new Error("Cannot find module '"+n+"'");throw d.code="MODULE_NOT_FOUND",d}return a[n]}e.keys=function(){return Object.keys(a)},e.resolve=l,M.exports=e,e.id=5520},4147:M=>{"use strict";M.exports={i8:"1.33.311"}}},M=>{M.O(0,["vendor"],()=>M(M.s=5728)),M.O()}]);